<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Avaliação - Loja</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        .progress-bar {
            background: #f0f0f0;
            border-radius: 10px;
            height: 10px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .step-info {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .step-content {
            margin: 40px 0;
        }

        .step-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 30px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .option-card {
            background: #f8f9fa;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .option-card:hover {
            border-color: #007bff;
            background: #e3f2fd;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .option-card.selected {
            border-color: #28a745;
            background: #d4edda;
        }

        .option-icon {
            width: 60px;
            height: 60px;
            background: #007bff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .option-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .option-desc {
            color: #666;
            font-size: 0.9em;
        }

        .rating-section {
            margin: 30px 0;
            text-align: left;
        }

        .rating-label {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: block;
        }

        .stars {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .star {
            font-size: 2.5em;
            color: #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }

        .star:hover,
        .star.active {
            color: #ffd700;
            transform: scale(1.1);
        }

        .comment-section {
            margin: 30px 0;
            text-align: left;
        }

        .comment-label {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            display: block;
        }

        .comment-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1.1em;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .comment-input:focus {
            outline: none;
            border-color: #007bff;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #1e7e34, #155724);
            transform: translateY(-2px);
        }

        .success-screen {
            text-align: center;
            padding: 40px;
        }

        .success-icon {
            font-size: 5em;
            color: #28a745;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 15px;
        }

        .success-message {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .admin-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
        }

        .admin-btn:hover {
            background: #138496;
        }

        .hidden {
            display: none;
        }

        /* Responsivo para iPad */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                margin: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .options-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .option-card {
                padding: 25px;
                min-height: 100px;
            }

            .star {
                font-size: 2em;
            }

            .buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <button class="admin-btn" onclick="toggleAdmin()">Admin</button>

    <div class="container">
        <!-- Tela Principal de Avaliação -->
        <div id="evaluation-screen">
            <div class="header">
                <h1>Avaliação de Atendimento</h1>
                <p>Sua opinião é muito importante para nós!</p>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="step-info" id="step-info">Etapa 1 de 4</div>

            <div class="step-content" id="step-content">
                <!-- Conteúdo das etapas será inserido aqui -->
            </div>

            <div class="buttons">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousStep()">Voltar</button>
                <button class="btn btn-primary" id="next-btn" onclick="nextStep()">Próximo</button>
            </div>
        </div>

        <!-- Tela de Sucesso -->
        <div id="success-screen" class="success-screen hidden">
            <div class="success-icon">✅</div>
            <h2 class="success-title">Avaliação Enviada!</h2>
            <p class="success-message">
                Obrigado pelo seu feedback! Sua opinião nos ajuda a melhorar nossos serviços continuamente.
            </p>
            <button class="btn btn-success" onclick="newEvaluation()">Nova Avaliação</button>
        </div>

        <!-- Painel Admin -->
        <div id="admin-screen" class="hidden">
            <div class="header">
                <h1>Painel Administrativo</h1>
                <p>Visualize os relatórios de avaliações</p>
            </div>
            
            <div id="admin-content">
                <h3>Relatórios de Avaliações</h3>
                <div id="stats" style="margin: 20px 0;">
                    <p><strong>Total de Avaliações:</strong> <span id="total-count">0</span></p>
                    <p><strong>Média Geral:</strong> <span id="average-rating">0</span> estrelas</p>
                </div>
                
                <div id="evaluations-list" style="text-align: left; max-height: 400px; overflow-y: auto;">
                    <!-- Lista de avaliações será inserida aqui -->
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="toggleAdmin()" style="margin-top: 20px;">Voltar ao Formulário</button>
        </div>
    </div>

    <script>
        // Dados do sistema
        const vendedoras = [
            { id: 1, nome: 'Jéssica', inicial: 'J' },
            { id: 2, nome: 'Júlia', inicial: 'J' },
            { id: 3, nome: 'Maju', inicial: 'M' },
            { id: 4, nome: 'Micaelly', inicial: 'M' }
        ];

        const comoConheceu = [
            { id: 1, nome: 'Google', descricao: 'Pesquisou no Google', inicial: 'G' },
            { id: 2, nome: 'Redes Sociais', descricao: 'Instagram, Facebook, etc.', inicial: 'R' },
            { id: 3, nome: 'Indicação', descricao: 'Amigos ou conhecidos', inicial: 'I' },
            { id: 4, nome: 'Passei na Porta', descricao: 'Viu a loja fisicamente', inicial: 'P' },
            { id: 5, nome: 'TikTok', descricao: 'Vídeos no TikTok', inicial: 'T' }
        ];

        // Estado da avaliação
        let currentStep = 1;
        let evaluationData = {
            vendedora: null,
            comoConheceu: null,
            avaliacaoGeral: 0,
            qualidadeServico: 0,
            simpatiaEquipe: 0,
            tempoResposta: 0,
            avaliacaoLoja: 0,
            comentarios: '',
            observacoes: ''
        };

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            showStep(1);
            loadAdminData();
        });

        function showStep(step) {
            currentStep = step;
            updateProgress();
            updateStepInfo();
            updateButtons();

            const content = document.getElementById('step-content');
            
            switch(step) {
                case 1:
                    content.innerHTML = createVendedorasStep();
                    break;
                case 2:
                    content.innerHTML = createComoConheceuStep();
                    break;
                case 3:
                    content.innerHTML = createRatingsStep();
                    break;
                case 4:
                    content.innerHTML = createCommentsStep();
                    break;
            }
        }

        function createVendedorasStep() {
            let html = '<h2 class="step-title">Quem te atendeu?</h2>';
            html += '<div class="options-grid">';
            
            vendedoras.forEach(vendedora => {
                html += `
                    <div class="option-card" onclick="selectVendedora(${vendedora.id})">
                        <div class="option-icon">${vendedora.inicial}</div>
                        <div class="option-name">${vendedora.nome}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            html += '<button class="btn btn-secondary" onclick="selectVendedora(0)" style="margin-top: 20px;">Não me lembro / Outro</button>';
            
            return html;
        }

        function createComoConheceuStep() {
            let html = '<h2 class="step-title">Como nos conheceu?</h2>';
            html += '<div class="options-grid">';
            
            comoConheceu.forEach(opcao => {
                html += `
                    <div class="option-card" onclick="selectComoConheceu(${opcao.id})">
                        <div class="option-icon">${opcao.inicial}</div>
                        <div class="option-name">${opcao.nome}</div>
                        <div class="option-desc">${opcao.descricao}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        function createRatingsStep() {
            let html = '<h2 class="step-title">Avalie nossos serviços</h2>';
            
            const ratings = [
                { key: 'avaliacaoGeral', label: 'Avaliação Geral do Atendimento' },
                { key: 'qualidadeServico', label: 'Qualidade do Serviço' },
                { key: 'simpatiaEquipe', label: 'Simpatia da Equipe' },
                { key: 'tempoResposta', label: 'Tempo de Resposta' },
                { key: 'avaliacaoLoja', label: 'Avaliação Geral da Loja' }
            ];

            ratings.forEach(rating => {
                html += `
                    <div class="rating-section">
                        <label class="rating-label">${rating.label}</label>
                        <div class="stars" data-rating="${rating.key}">
                            ${[1,2,3,4,5].map(i => `<span class="star" data-value="${i}" onclick="setRating('${rating.key}', ${i})">★</span>`).join('')}
                        </div>
                    </div>
                `;
            });
            
            return html;
        }

        function createCommentsStep() {
            return `
                <h2 class="step-title">Observações Adicionais</h2>
                <div class="comment-section">
                    <label class="comment-label">Comentários sobre o atendimento</label>
                    <textarea class="comment-input" id="comentarios" placeholder="Conte-nos sobre sua experiência..."></textarea>
                </div>
                <div class="comment-section">
                    <label class="comment-label">Outras observações</label>
                    <textarea class="comment-input" id="observacoes" placeholder="Algo mais que gostaria de compartilhar?"></textarea>
                </div>
            `;
        }

        function selectVendedora(id) {
            evaluationData.vendedora = id;
            setTimeout(() => nextStep(), 500);
        }

        function selectComoConheceu(id) {
            evaluationData.comoConheceu = id;
            setTimeout(() => nextStep(), 500);
        }

        function setRating(category, value) {
            evaluationData[category] = value;
            
            // Atualizar visual das estrelas
            const container = document.querySelector(`[data-rating="${category}"]`);
            const stars = container.querySelectorAll('.star');
            
            stars.forEach((star, index) => {
                if (index < value) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function updateProgress() {
            const progress = (currentStep / 4) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        function updateStepInfo() {
            document.getElementById('step-info').textContent = `Etapa ${currentStep} de 4`;
        }

        function updateButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.style.display = currentStep === 1 ? 'none' : 'block';
            
            if (currentStep === 4) {
                nextBtn.textContent = 'Enviar Avaliação';
                nextBtn.className = 'btn btn-success';
            } else {
                nextBtn.textContent = 'Próximo';
                nextBtn.className = 'btn btn-primary';
            }
        }

        function nextStep() {
            if (currentStep === 4) {
                // Coletar comentários
                const comentarios = document.getElementById('comentarios');
                const observacoes = document.getElementById('observacoes');
                
                if (comentarios) evaluationData.comentarios = comentarios.value;
                if (observacoes) evaluationData.observacoes = observacoes.value;
                
                submitEvaluation();
            } else if (currentStep < 4) {
                showStep(currentStep + 1);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        function submitEvaluation() {
            // Salvar no localStorage
            const evaluations = JSON.parse(localStorage.getItem('evaluations') || '[]');
            
            const newEvaluation = {
                ...evaluationData,
                timestamp: new Date().toISOString(),
                id: Date.now()
            };
            
            evaluations.push(newEvaluation);
            localStorage.setItem('evaluations', JSON.stringify(evaluations));
            
            // Mostrar tela de sucesso
            document.getElementById('evaluation-screen').classList.add('hidden');
            document.getElementById('success-screen').classList.remove('hidden');
        }

        function newEvaluation() {
            // Reset
            evaluationData = {
                vendedora: null,
                comoConheceu: null,
                avaliacaoGeral: 0,
                qualidadeServico: 0,
                simpatiaEquipe: 0,
                tempoResposta: 0,
                avaliacaoLoja: 0,
                comentarios: '',
                observacoes: ''
            };
            
            document.getElementById('success-screen').classList.add('hidden');
            document.getElementById('evaluation-screen').classList.remove('hidden');
            showStep(1);
        }

        function toggleAdmin() {
            const evalScreen = document.getElementById('evaluation-screen');
            const successScreen = document.getElementById('success-screen');
            const adminScreen = document.getElementById('admin-screen');
            
            if (adminScreen.classList.contains('hidden')) {
                evalScreen.classList.add('hidden');
                successScreen.classList.add('hidden');
                adminScreen.classList.remove('hidden');
                loadAdminData();
            } else {
                adminScreen.classList.add('hidden');
                evalScreen.classList.remove('hidden');
            }
        }

        function loadAdminData() {
            const evaluations = JSON.parse(localStorage.getItem('evaluations') || '[]');
            
            // Estatísticas
            document.getElementById('total-count').textContent = evaluations.length;
            
            if (evaluations.length > 0) {
                const totalRating = evaluations.reduce((sum, eval) => {
                    return sum + (eval.avaliacaoGeral + eval.qualidadeServico + eval.simpatiaEquipe + eval.tempoResposta + eval.avaliacaoLoja) / 5;
                }, 0);
                const avgRating = (totalRating / evaluations.length).toFixed(1);
                document.getElementById('average-rating').textContent = avgRating;
            } else {
                document.getElementById('average-rating').textContent = '0';
            }
            
            // Lista de avaliações
            const listContainer = document.getElementById('evaluations-list');
            if (evaluations.length === 0) {
                listContainer.innerHTML = '<p>Nenhuma avaliação encontrada.</p>';
                return;
            }
            
            let html = '<h4>Avaliações Recentes:</h4>';
            evaluations.slice(-10).reverse().forEach(eval => {
                const vendedoraNome = eval.vendedora === 0 ? 'Não informado' : 
                    (vendedoras.find(v => v.id === eval.vendedora)?.nome || 'Desconhecido');
                
                const comoConheceuNome = comoConheceu.find(c => c.id === eval.comoConheceu)?.nome || 'Não informado';
                
                const date = new Date(eval.timestamp).toLocaleString('pt-BR');
                
                html += `
                    <div style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px;">
                        <p><strong>Data:</strong> ${date}</p>
                        <p><strong>Vendedora:</strong> ${vendedoraNome}</p>
                        <p><strong>Como conheceu:</strong> ${comoConheceuNome}</p>
                        <p><strong>Avaliações:</strong> 
                            Geral: ${eval.avaliacaoGeral}★, 
                            Qualidade: ${eval.qualidadeServico}★, 
                            Simpatia: ${eval.simpatiaEquipe}★, 
                            Tempo: ${eval.tempoResposta}★, 
                            Loja: ${eval.avaliacaoLoja}★
                        </p>
                        ${eval.comentarios ? `<p><strong>Comentários:</strong> ${eval.comentarios}</p>` : ''}
                        ${eval.observacoes ? `<p><strong>Observações:</strong> ${eval.observacoes}</p>` : ''}
                    </div>
                `;
            });
            
            listContainer.innerHTML = html;
        }
    </script>
</body>
</html>
